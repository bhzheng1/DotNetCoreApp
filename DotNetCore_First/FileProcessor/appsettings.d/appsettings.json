{
  "ApiEndpoint": "http://api:9066",

  "MonitorPath": "/data/sftp",

  "DocumentRepository": {
    "ApiKey": "api-key",
    "Endpoint": "http://localhost:5001",
    "ArchiveBucket": "archive" 
  },

  "Handlers": [
    {
      "Description": "delete OS generated files",
      "Kind": "IDB.SFTPProcessor.Handlers.Delete",
      "Src": "**/.DS_Store"
    },
    {
      "Description": "client named entitlements",
      "Kind": "IDB.SFTPProcessor.Handlers.Entitlements",
      "Src": "/data/sftp/{_:regex((?<clientname>[a-zA-Z0-9]*)_USERS_(?<desc>.*)\\.(txt|csv))}",
      "Dst": "/data/export/{clientname}/{pid}/entitlements_{desc}.csv",
      "ClientNameParam": "clientname",
      "DisableApplnCall": false,
      "Archival": true
    },
    {
      "Description": "client named fund documents",
      "Kind": "IDB.SFTPProcessor.Handlers.Documents",
      "SrcZip": "/data/sftp/FundDocuments_{_:regex((?<desc>.*)\\.zip)}",
      "SrcFile": "{_:regex((?<clientname>[A-Za-z0-9]*)_(?<fund>[A-Za-z0-9-,]*)_(?<class>[A-Za-z0-9-,]*)_(?<doctype>[A-Za-z0-9- ]*)_)}{docdate:dt(ddMMMyyyy)}_{_:regex((?<docdesc>.*)\\.)}pdf",
      "DstZip": "/data/export/{clientname}/{pid}/FundDocuments_{desc}.zip",
      "DstFile": "{fund}_{class}_{doctype}_{docdate}_{docdesc}.pdf",
      "ClientNameParam": "clientname",
      "DisableApplnCall": false,
      "Archival": true
    },
    {
      "Description": "client named account documents",
      "Kind": "IDB.SFTPProcessor.Handlers.Documents",
      "SrcZip": "/data/sftp/{_:regex((?<desc>.*)\\.zip)}",
      "SrcFile": "{_:regex((?<clientname>[A-Za-z0-9]*)_(?<fund>[A-Za-z0-9-]*)_(?<investor>[A-Za-z0-9]*)_(?<doctype>[A-Za-z0-9- ]*)_)}{docdate:dt(ddMMMyyyy)}{_:regex((?<docdesc>_.*)?\\.)}pdf",
      "DstZip": "/data/export/{clientname}/{pid}/AccountDocuments_{desc}.zip",
      "DstFile": "{fund}_{investor}_{doctype}_{docdate}{docdesc}.pdf",
      "ClientNameParam": "clientname",
      "DisableApplnCall": false,
      "Archival": true
    },
    {
      "Description": "client named legacy account documents",
      "Kind": "IDB.SFTPProcessor.Handlers.Documents",
      "SrcZip": "/data/sftp/{_:regex((?<desc>.*)\\.zip)}",
      "SrcFile": "{_:regex((?<doctype>[A-Za-z0-9- ]*)_(?<clientname>[A-Za-z0-9]*)_(?<fund>[A-Za-z0-9-]*)_(?<investor>[A-Za-z0-9]*)_([A-Za-z0-9- ]*) )}{docdate:dt(ddMMMyyyy)}{_:regex((?<docdesc>_.*)?\\.)}pdf",
      "DstZip": "/data/export/{clientname}/{pid}/AccountDocuments_{desc}.zip",
      "DstFile": "{fund}_{investor}_{doctype}_{docdate}{docdesc}.pdf",
      "ClientNameParam": "clientname",
      "DisableApplnCall": false,
      "Archival": true
    },
    {
      "Description": "client folder entitlements",
      "Kind": "IDB.SFTPProcessor.Handlers.Entitlements",
      "Src": "/data/sftp/{clientname}/USERS_{_:regex((?<desc>.*)\\.(txt|csv))}",
      "Dst": "/data/export/{clientname}/{pid}/entitlements_{desc}.csv",
      "ClientNameParam": "clientname",
      "DisableApplnCall": false,
      "Archival": true
    },
    {
      "Description": "client folder account documents",
      "Kind": "IDB.SFTPProcessor.Handlers.Documents",
      "SrcZip": "/data/sftp/{clientname}/AccountDocuments_{_:regex((?<desc>.*)\\.zip)}",
      "SrcFile": "{_:regex((?<fund>[A-Za-z0-9-]*)_(?<investor>[A-Za-z0-9]*)_(?<doctype>[A-Za-z0-9- ]*)_)}{docdate:dt(ddMMMyyyy)}{_:regex((?<docdesc>_.*)?\\.)}pdf",
      "DstZip": "/data/export/{clientname}/{pid}/AccountDocuments_{desc}.zip",
      "DstFile": "{fund}_{investor}_{doctype}_{docdate}{docdesc}.pdf",
      "ClientNameParam": "clientname",
      "DisableApplnCall": false,
      "Archival": true
    },
    {
      "Description": "client folder fund documents",
      "Kind": "IDB.SFTPProcessor.Handlers.Documents",
      "SrcZip": "/data/sftp/{clientname}/FundDocuments_{_:regex((?<desc>.*)\\.zip)}",
      "SrcFile": "{_:regex((?<fund>[A-Za-z0-9-,]*)_(?<class>[A-Za-z0-9-,]*)_(?<doctype>[A-Za-z0-9- ]*)_)}{docdate:dt(ddMMMyyyy)}_{_:regex((?<docdesc>.*)\\.(?<flags>\\.r)?)}pdf",
      "DstZip": "/data/export/{clientname}/{pid}/FundDocuments_{desc}.zip",
      "DstFile": "{fund}_{class}_{doctype}_{docdate}_{docdesc}.pdf",
      "ClientNameParam": "clientname",
      "DisableApplnCall": false,
      "Archival": true
    }
  ]
}
